api:
  name: serve

  resources:

    - name: templates
      route: templates
      resource: type.lib.templates.Template

      omit-db-calls: true

      methods:

        - method: list
          output: 
            name: ts
            type: array:type.lib.templates.Template.views.Short

        - method: post
          input:
            name: inTpl
            type: type.lib.templates.Template.views.Create
          output:
            name: outTpl
            type: type.lib.templates.Template

        - method: get
          path-params:
            - name: templateId
              type: type.lib.templates.Template.fields.Id
          output: 
            name: t
            type: type.lib.templates.Template

        - method: put
          path-params:
            - name: templateId
              type: type.lib.templates.Template.fields.Id
          input:
            name: inTpl
            type: type.lib.templates.Template
          output:
            name: outTpl
            type: type.lib.templates.Template

        - method: delete
          path-params:
            - name: templateId
              type: type.lib.templates.Template.fields.Id
          output:
            name: outTpl
            type: type.lib.templates.Template.views.Short

      routes:

        - name: render
          route: render
          method: POST
          path-params:
            - name: templateId
              type: type.lib.templates.Template.fields.Id
          output:
            name: renderReturn
            type: "map:interface{}"
